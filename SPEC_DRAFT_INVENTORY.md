# 装備整理・自動売却機能の仕様草案

## 1. 目的
放置やすごろく等で大量にドロップした装備品を毎回手動で売却する手間（作業感）を削減し、プレイヤーが「より良い装備を厳選する」本来の楽しさに集中できる環境を作る。

## 2. 実装案：一括売却機能
装備画面に「一帯売却ボタン」を設置し、条件に合う装備をワンクリックでMumelに変換する。

*   **UI追加:** 装備画面 (`screen-equipment`) 内のどこかに「一括売却」ボタンを設置する。
*   **機能:**
    *   ボタンを押すと、確認ダイアログ（モーダル）が表示される。
    *   **フィルタ設定（一括売却の条件）**:
        *   「レアリティ（コモン・アンコモン...）以下をすべて売却する」といった選択肢を用意。
        *   （オプション案）「オプションが付いていない装備をすべて売却する」チェックボックス。
    *   **売却の実行**: フィルタに該当し、かつ**「ロック（保護）されていない」**装備を一括で売却し、結果（獲得Mumel数、売却件数）をダイアログや戦闘ログに表示する。
*   **前提条件（追加システム）**: 「お気に入り（ロック）」機能。誤って重要な装備を売らないように、装備一つ一つにロックをかけられるピン留め機能が必須となる。

## 3. 実装案：自動売却（オートセル）機能
放置状態で放置し続けるための高度な機能。

*   **UI追加:** メニューの「設定（Settings）」または「ステータス」付近に「自動売却設定」のトグル/ドロップダウンを設ける。
*   **機能:**
    *   ドロップ判定処理 (`game.js` の `checkEnemyDrops`) に介入する。
    *   アイテムを拾った際、そのアイテムのレアリティがユーザーの設定した閾値（例: コモン以下）以下であれば、インベントリに入れずに直接Mumelに変換する。
    *   **演出**: 戦闘ログに `[自動売却] ボロの剣 (+10 Mumel)` のように表示する。

## 4. フェーズ分け（導入順序の提案）
いきなり全てを作るとバグのもとになりやすいため、以下の順序を推奨。

1.  **Phase 1: 「お気に入り（ロック）機能」の実装**
    *   装備のプロパティに `isLocked: boolean` を追加。UI上で鍵アイコンを押してトグル切り替え可能にする。
2.  **Phase 2: 「一括売却機能」の実装**
    *   ロックされていないコモン〜（任意のレアリティ）以下の装備をまとめて売るボタンの追加。
3.  **Phase 3: 「自動売却」の追加 (必要に応じて)**
    *   ドロップ処理への介入設定の追加。

